{{extend 'admin/layout/index.html'}}

{{block 'content'}}
<div class="layui-card zf-parent-body-white" style="margin-bottom: 0px;">
  <div class="layui-card-body">
    <form class="layui-form" lay-filter="category-update-form">

      <div class="layui-form-item">
        <label class="layui-form-label">上级：</label>
        <div class="layui-input-block category-tree-select"></div>
      </div>

      <div class="layui-form-item">
        <label class="layui-form-label">名称：</label>
        <div class="layui-input-block">
          <input type="text" name="name" lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
        </div>
      </div>

      <div class="layui-form-item">
        <label class="layui-form-label">简介：</label>
        <div class="layui-input-block">
          <input type="text" name="description" lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
        </div>
      </div>

      <div class="layui-form-item">
        <label class="layui-form-label">seo标题：</label>
        <div class="layui-input-block">
          <input type="text" name="seo_title" lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
        </div>
      </div>

      <div class="layui-form-item">
        <label class="layui-form-label">seo关键词：</label>
        <div class="layui-input-block">
          <input type="text" name="seo_keywords" lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
        </div>
      </div>

      <div class="layui-form-item">
        <label class="layui-form-label">列表模板：</label>
        <div class="layui-input-block">
          <input type="text" name="list_tpl" lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
        </div>
      </div>

      <div class="layui-form-item">
        <label class="layui-form-label">详情模板：</label>
        <div class="layui-input-block">
          <input type="text" name="details_tpl" lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
        </div>
      </div>

      <input type="button" hidden id="category-update-submit" lay-filter="category-update-submit" lay-submit value="确认">
    </form>
  </div>
</div>
{{/block}}

{{block 'after-js'}}
<script>
  $.ajax({
    url     : '{{updateUrl}}?fields=name,description,seo_title,seo_keywords,list_tpl,details_tpl,parent_id',
    type    : 'GET',
    dataType: 'json',
    success : function (res) {
      form.val("category-update-form", res.data);
      treeSelect('/api/category/index?tree=1', '.category-tree-select', 'children', res.data)
    }
  })
</script>
{{/block}}